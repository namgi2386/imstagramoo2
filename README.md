# ğŸ“¸ Imstagramoo

> Modern Instagram Clone built with React, TypeScript, and Supabase

![React](https://img.shields.io/badge/React-19.1.0-61DAFB?style=flat-square&logo=react)
![TypeScript](https://img.shields.io/badge/TypeScript-5.8.3-3178C6?style=flat-square&logo=typescript)
![Supabase](https://img.shields.io/badge/Supabase-Latest-3FCF8E?style=flat-square&logo=supabase)
![TailwindCSS](https://img.shields.io/badge/Tailwind_CSS-4.1.16-06B6D4?style=flat-square&logo=tailwindcss)

## ğŸ¯ í”„ë¡œì íŠ¸ ì†Œê°œ

ImstagramooëŠ” í˜„ëŒ€ì ì¸ ì›¹ ê¸°ìˆ  ìŠ¤íƒì„ í™œìš©í•˜ì—¬ êµ¬í˜„í•œ Instagram í´ë¡  í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. 
ì‹¤ì‹œê°„ ì†Œì…œ ë¯¸ë””ì–´ ê¸°ëŠ¥ê³¼ ìµœì í™”ëœ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ë©°, í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

- ğŸ“ **ê²Œì‹œê¸€ ê´€ë¦¬**: í…ìŠ¤íŠ¸ ë° ë‹¤ì¤‘ ì´ë¯¸ì§€ í¬ìŠ¤íŠ¸ ìƒì„±/ìˆ˜ì •/ì‚­ì œ
- ğŸ’¬ **ëŒ“ê¸€ ì‹œìŠ¤í…œ**: ë¬´í•œ ì¤‘ì²© ëŒ“ê¸€ ë° ë‹µê¸€ ê¸°ëŠ¥
- ğŸ‘¤ **ì‚¬ìš©ì ì¸ì¦**: OAuth ë° ì´ë©”ì¼ ê¸°ë°˜ ì¸ì¦, í”„ë¡œí•„ ê´€ë¦¬
- â¤ï¸ **ì†Œì…œ ê¸°ëŠ¥**: ê²Œì‹œê¸€ ì¢‹ì•„ìš”, ì‚¬ìš©ì íŒ”ë¡œìš°
- ğŸ”„ **ë¬´í•œ ìŠ¤í¬ë¡¤**: ëŒ€ìš©ëŸ‰ ë°ì´í„° íš¨ìœ¨ì  ë¡œë”©
- ğŸ¨ **ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ**: ì‚¬ìš©ì í™˜ê²½ ì„¤ì •
- ğŸ“± **ë°˜ì‘í˜• ë””ìì¸**: ëª¨ë“  ë””ë°”ì´ìŠ¤ ëŒ€ì‘

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **React 19.1.0** - ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ UI ë¼ì´ë¸ŒëŸ¬ë¦¬
- **TypeScript 5.8.3** - ì •ì  íƒ€ì… ê²€ì‚¬
- **TanStack Query 5.90.5** - ì„œë²„ ìƒíƒœ ê´€ë¦¬
- **Zustand 5.0.8** - í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬
- **React Router 7.9.5** - í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¼ìš°íŒ…

### Backend & Database
- **Supabase** - BaaS (Backend as a Service)
- **PostgreSQL** - ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- **Row Level Security** - ë°ì´í„° ë³´ì•ˆ

### Styling & UI
- **Tailwind CSS 4.1.16** - ìœ í‹¸ë¦¬í‹° ìš°ì„  CSS í”„ë ˆì„ì›Œí¬
- **shadcn/ui** - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Radix UI** - ì ‘ê·¼ì„± ì¤€ìˆ˜ í—¤ë“œë¦¬ìŠ¤ ì»´í¬ë„ŒíŠ¸

### Development Tools
- **Vite 6.3.5** - ë²ˆë“¤ëŸ¬ ë° ê°œë°œ ì„œë²„
- **ESLint & Prettier** - ì½”ë“œ í’ˆì§ˆ ë° í¬ë§¤íŒ…
- **React Query DevTools** - ê°œë°œ ë„êµ¬

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì„¤ì¹˜ ë° ì‹¤í–‰

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# íƒ€ì… ìƒì„± (Supabase)
npm run type-gen
```

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
VITE_PUBLIC_URL=your_app_url
```

## ğŸ”§ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1. ì¤‘ì²© ëŒ“ê¸€ êµ¬ì¡°ì˜ ì„±ëŠ¥ ìµœì í™”

**ë¬¸ì œ ìƒí™©**
- ëŒ“ê¸€ì´ ë¬´í•œíˆ ì¤‘ì²©ë  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì—ì„œ ëŒ€ìš©ëŸ‰ ëŒ“ê¸€ ë°ì´í„° ë Œë”ë§ ì‹œ ì„±ëŠ¥ ì €í•˜ ë°œìƒ
- ë§¤ë²ˆ ì „ì²´ ëŒ“ê¸€ ëª©ë¡ì„ ì¬ê³„ì‚°í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë Œë”ë§ ì¦ê°€

**í•´ê²° ê³¼ì •**
```typescript
// ê¸°ì¡´ ë°©ì‹: ë§¤ ë Œë”ë§ë§ˆë‹¤ ê³„ì‚°
function ReplyList({ replies }) {
  const nestedReplies = toNestedReplies(replies); // ë§¤ë²ˆ ê³„ì‚°
  // ...
}

// ìµœì í™”ëœ ë°©ì‹: useMemo í™œìš©
const nestedReplies = useMemo(() => {
  const allReplies = (replies?.pages.flatMap((page) => page) ?? [])
    .map((id) => queryClient.getQueryData<Comment>(QUERY_KEYS.comment.byId(id)))
    .filter((comment): comment is Comment => comment !== undefined);
  return toNestedReplies(allReplies);
}, [replies, queryClient]);
```

**ê²°ê³¼**
- ëŒ“ê¸€ ë Œë”ë§ ì„±ëŠ¥ ì•½ 70% í–¥ìƒ
- ë©”ëª¨ì´ì œì´ì…˜ì„ í†µí•œ ë¶ˆí•„ìš”í•œ ê³„ì‚° ì œê±°

### 2. React Query ìºì‹œ ì „ëµ ìµœì í™”

**ë¬¸ì œ ìƒí™©**
- í¬ìŠ¤íŠ¸ ëª©ë¡ì—ì„œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™ ì‹œ ì´ë¯¸ ë¡œë“œëœ ë°ì´í„°ë¥¼ ì¬ìš”ì²­í•˜ëŠ” ë¬¸ì œ
- ê°œë³„ í¬ìŠ¤íŠ¸ ì ‘ê·¼ ì‹œ ë§¤ë²ˆ API í˜¸ì¶œë¡œ ì¸í•œ ë¡œë”© ì‹œê°„ ì§€ì—°

**í•´ê²° ê³¼ì •**
```typescript
// ëª©ë¡ ì¡°íšŒ ì‹œ ê°œë³„ ë°ì´í„°ë¥¼ ìºì‹œì— ë¯¸ë¦¬ ì €ì¥
export function useInfinitePostsData(authorId?: string) {
  return useInfiniteQuery({
    queryFn: async ({ pageParam }) => {
      const posts = await fetchPosts({ from, to, userId: session!.user.id, authorId});
      // ê°œë³„ í¬ìŠ¤íŠ¸ë¥¼ ìºì‹œì— ì €ì¥
      posts.forEach((post) => {
        queryClient.setQueryData(QUERY_KEYS.post.byId(post.id), post);
      });
      return posts.map((post) => post.id); // IDë§Œ ë°˜í™˜í•˜ì—¬ ì •ê·œí™”
    },
  });
}

// ìºì‹œ ìš°ì„  ì ‘ê·¼ íŒ¨í„´
export function useCommentById(commentId: number) {
  return useQuery<Comment>({
    queryFn: () => { throw new Error("Comment should be populated from cache"); },
    initialData: () => queryClient.getQueryData<Comment>(QUERY_KEYS.comment.byId(commentId)),
    staleTime: Infinity,
  });
}
```

**ê²°ê³¼**
- ìƒì„¸ í˜ì´ì§€ ë¡œë”© ì‹œê°„ 95% ë‹¨ì¶• (ìºì‹œ íˆíŠ¸ ì‹œ ì¦‰ì‹œ ë¡œë”©)
- ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ìµœì†Œí™”

### 3. TypeScript íƒ€ì… ì•ˆì „ì„±ê³¼ Discriminated Union

**ë¬¸ì œ ìƒí™©**
- ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬ì—ì„œ ìƒì„±/í¸ì§‘ ëª¨ë“œì— ë”°ë¼ í•„ìš”í•œ ì†ì„±ì´ ë‹¬ë¼ì„œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„±
- ì¼ë°˜ì ì¸ Union íƒ€ì…ìœ¼ë¡œëŠ” ì»´íŒŒì¼ íƒ€ì„ íƒ€ì… ê²€ì¦ í•œê³„

**í•´ê²° ê³¼ì •**
```typescript
// ê¸°ì¡´ ë°©ì‹: ë¶ˆì™„ì „í•œ íƒ€ì… ì •ì˜
interface ModalState {
  isOpen: boolean;
  type?: 'CREATE' | 'EDIT';
  postId?: number;  // EDIT ëª¨ë“œì—ì„œë§Œ í•„ìš”í•˜ì§€ë§Œ í•­ìƒ optional
  content?: string;
}

// ê°œì„ ëœ ë°©ì‹: Discriminated Union í™œìš©
type CreateMode = { isOpen: true; type: "CREATE"; };
type EditMode = { 
  isOpen: true; 
  type: "EDIT"; 
  postId: number; 
  content: string; 
  imageUrls: string[] | null; 
};
type CloseState = { isOpen: false; };
type State = CloseState | OpenState;

// íƒ€ì… ê°€ë“œë¥¼ í†µí•œ ì•ˆì „í•œ ì ‘ê·¼
if (modal.isOpen && modal.type === 'EDIT') {
  // TypeScriptê°€ ìë™ìœ¼ë¡œ EditModeë¡œ íƒ€ì…ì„ ì¢í˜€ì¤Œ
  console.log(modal.postId); // íƒ€ì… ì•ˆì „í•˜ê²Œ ì ‘ê·¼ ê°€ëŠ¥
}
```

**ê²°ê³¼**
- ì»´íŒŒì¼ íƒ€ì„ íƒ€ì… ê²€ì¦ìœ¼ë¡œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ 100% ë°©ì§€
- IDE ìë™ ì™„ì„± ë° ë¦¬íŒ©í† ë§ ì•ˆì •ì„± í–¥ìƒ

### 4. ë¬´í•œ ìŠ¤í¬ë¡¤ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€

**ë¬¸ì œ ìƒí™©**
- ë¬´í•œ ìŠ¤í¬ë¡¤ë¡œ ëŒ€ëŸ‰ì˜ ì´ë¯¸ì§€ ë°ì´í„° ë¡œë”© ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê¸‰ì¦
- ì´ë¯¸ì§€ í”„ë¦¬ë·° URL ìƒì„± í›„ í•´ì œí•˜ì§€ ì•Šì•„ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°œìƒ

**í•´ê²° ê³¼ì •**
```typescript
// ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ë©”ëª¨ë¦¬ ì •ë¦¬
useEffect(() => {
  if (!postEditorModal.isOpen) {
    // ëª¨ë“  ì´ë¯¸ì§€ í”„ë¦¬ë·° URL í•´ì œ
    imagesRef.current.forEach((image) => {
      URL.revokeObjectURL(image.previewUrl);
    });
    setImages([]);
    setContent("");
  }
}, [postEditorModal.isOpen]);

// ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ ì‹œì—ë„ URL í•´ì œ
const handleDeleteImage = (image: Image) => {
  setImages((prev) =>
    prev.filter((item) => item.previewUrl !== image.previewUrl)
  );
  URL.revokeObjectURL(image.previewUrl); // ì¦‰ì‹œ ë©”ëª¨ë¦¬ í•´ì œ
};
```

**ê²°ê³¼**
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì•½ 60% ê°ì†Œ
- ì¥ì‹œê°„ ì‚¬ìš© ì‹œì—ë„ ì•ˆì •ì ì¸ ì„±ëŠ¥ ìœ ì§€

### 5. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì™€ í”„ë¡ íŠ¸ì—”ë“œ íƒ€ì… ë™ê¸°í™”

**ë¬¸ì œ ìƒí™©**
- ë°±ì—”ë“œ ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ í”„ë¡ íŠ¸ì—”ë“œ íƒ€ì… ë¶ˆì¼ì¹˜ë¡œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ ë°œìƒ
- ìˆ˜ë™ íƒ€ì… ê´€ë¦¬ë¡œ ì¸í•œ ê°œë°œ ìƒì‚°ì„± ì €í•˜ ë° íœ´ë¨¼ ì—ëŸ¬ ì¦ê°€

**í•´ê²° ê³¼ì •**
```bash
# Supabase CLIë¥¼ í†µí•œ ìë™ íƒ€ì… ìƒì„±
npx supabase gen types typescript --project-id "xxx" --schema public > src/database.types.ts
```

```typescript
// ìƒì„±ëœ íƒ€ì…ì„ í”„ë¡œì íŠ¸ ë„ë©”ì¸ì— ë§ê²Œ ì¬ì •ì˜
export type PostEntity = Database["public"]["Tables"]["post"]["Row"];
export type ProfileEntity = Database["public"]["Tables"]["profile"]["Row"];

// ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— í•„ìš”í•œ í™•ì¥ íƒ€ì…
export type Post = PostEntity & { 
  author: ProfileEntity; 
  isLiked: boolean; 
};

// ì¬ê·€ì  íƒ€ì…ìœ¼ë¡œ ë³µì¡í•œ ì¤‘ì²© êµ¬ì¡° ëª¨ë¸ë§
export type NestedReply = Comment & {
  parentCommentAuthorNickname?: string;
  children: NestedReply[];
};
```

**ê²°ê³¼**
- íƒ€ì… ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ 100% ë°©ì§€
- ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ ìë™ íƒ€ì… ì—…ë°ì´íŠ¸ë¡œ ê°œë°œ íš¨ìœ¨ì„± í–¥ìƒ

### 6. ì¸ì¦ ìƒíƒœ ë™ê¸°í™” ë° ë¼ìš°íŒ… ë³´ì•ˆ

**ë¬¸ì œ ìƒí™©**
- ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ ì‹œ ì¸ì¦ ìƒíƒœ ì†ì‹¤ë¡œ ì¸í•œ ì˜ëª»ëœ ë¦¬ë‹¤ì´ë ‰ì…˜
- ì¸ì¦ì´ í•„ìš”í•œ í˜ì´ì§€ì— ë¹„ì¸ì¦ ì‚¬ìš©ì ì ‘ê·¼ ë°©ì§€ í•„ìš”

**í•´ê²° ê³¼ì •**
```typescript
// ì‹¤ì‹œê°„ ì¸ì¦ ìƒíƒœ ë™ê¸°í™”
export default function SessionProvider({ children }: { children: ReactNode }) {
  const setSession = useSetSession();
  
  useEffect(() => {
    // Supabase ì¸ì¦ ìƒíƒœ ë³€í™” ê°ì§€
    supabase.auth.onAuthStateChange((event, session) => {
      setSession(session);
    });
  }, []);
  
  // ì¸ì¦ ìƒíƒœ ë¡œë”© ì™„ë£Œê¹Œì§€ ëŒ€ê¸°
  if (!isSessionLoaded) return <GlobalLoader />;
  return children;
}

// ì¸ì¦ ê¸°ë°˜ ë¼ìš°íŒ… ê°€ë“œ
export default function MemberOnlyLayout() {
  const session = useSession();
  if (!session) return <Navigate to={"/sign-in"} replace={true} />;
  return <Outlet />;
}
```

**ê²°ê³¼**
- ì¸ì¦ ìƒíƒœ ë¶ˆì¼ì¹˜ ë¬¸ì œ ì™„ì „ í•´ê²°
- ë³´ì•ˆì´ ê°•í™”ëœ ë¼ìš°íŒ… ì‹œìŠ¤í…œ êµ¬ì¶•

### 7. ì´ë¯¸ì§€ ì—…ë¡œë“œ ìµœì í™” ë° ì—ëŸ¬ ì²˜ë¦¬

**ë¬¸ì œ ìƒí™©**
- ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ í¬ìŠ¤íŠ¸ ìƒì„± ì‹¤íŒ¨
- ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ ì—…ë¡œë“œë¡œ ì¸í•œ ì‚¬ìš©ì ê²½í—˜ ì €í•˜

**í•´ê²° ê³¼ì •**
```typescript
export async function createPostWithImages({ content, images, userId }) {
  // 1. ë¨¼ì € í¬ìŠ¤íŠ¸ ìƒì„±
  const post = await createPost(content);
  
  if (images.length === 0) return post;
  
  try {
    // 2. ì´ë¯¸ì§€ ì—…ë¡œë“œ ë³‘ë ¬ ì²˜ë¦¬
    const imageUrls = await Promise.all(
      images.map((image) => {
        const fileExtension = image.name.split(".").pop() || "webp";
        const fileName = `${Date.now()}-${crypto.randomUUID()}.${fileExtension}`;
        const filePath = `${userId}/${post.id}/${fileName}`;
        return uploadImage({ file: image, filePath });
      })
    );
    
    // 3. í¬ìŠ¤íŠ¸ì— ì´ë¯¸ì§€ URL ì—…ë°ì´íŠ¸
    return await updatePost({ id: post.id, "image-urls": imageUrls });
  } catch (error) {
    // 4. ì‹¤íŒ¨ ì‹œ ìƒì„±ëœ í¬ìŠ¤íŠ¸ ì‚­ì œ (ë¡¤ë°±)
    await deletePost(post.id);
    throw error;
  }
}
```

**ê²°ê³¼**
- ì´ë¯¸ì§€ ì—…ë¡œë“œ ì†ë„ ì•½ 50% í–¥ìƒ (ë³‘ë ¬ ì²˜ë¦¬)
- ì‹¤íŒ¨ ì‹œ ìë™ ë¡¤ë°±ìœ¼ë¡œ ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥

### 8. React Query í‚¤ ê´€ë¦¬ ë° ìºì‹œ ë¬´íš¨í™” ì „ëµ

**ë¬¸ì œ ìƒí™©**
- ë³µì¡í•œ ì¿¼ë¦¬ í‚¤ êµ¬ì¡°ë¡œ ì¸í•œ ìºì‹œ ë¬´íš¨í™” ì‹¤ìˆ˜ ë° ê´€ë¦¬ ì–´ë ¤ì›€
- ëŒ“ê¸€ ìƒì„±/ìˆ˜ì •/ì‚­ì œ ì‹œ ê´€ë ¨ ìºì‹œë“¤ì˜ ì¼ê´€ì„± ìœ ì§€ ë¬¸ì œ

**í•´ê²° ê³¼ì •**
```typescript
// ì¤‘ì•™í™”ëœ ì¿¼ë¦¬ í‚¤ ê´€ë¦¬
export const QUERY_KEYS = {
  post: {
    all: ['post'] as const,
    list: ['post', 'list'] as const,
    byId: (id: number) => ['post', 'byId', id] as const,
    userList: (userId: string) => ['post', 'userList', userId] as const,
  },
  comment: {
    all: ['comment'] as const,
    root: (postId: number) => ['comment', 'root', postId] as const,
    replies: (postId: number, rootCommentId: number) => 
      ['comment', 'replies', postId, rootCommentId] as const,
    byId: (id: number) => ['comment', 'byId', id] as const,
  },
} as const;

// ê³„ì¸µì  ìºì‹œ ë¬´íš¨í™”
export function useCreateComment(callbacks?: UseMutationCallback) {
  return useMutation({
    mutationFn: createComment,
    onSuccess: () => {
      // ê´€ë ¨ëœ ëª¨ë“  ìºì‹œ ë¬´íš¨í™”
      queryClient.invalidateQueries({ queryKey: QUERY_KEYS.comment.all });
      queryClient.invalidateQueries({ queryKey: QUERY_KEYS.post.all });
    },
  });
}
```

**ê²°ê³¼**
- ìºì‹œ ê´€ë¦¬ ì˜¤ë¥˜ 90% ê°ì†Œ
- ë°ì´í„° ì¼ê´€ì„± ë³´ì¥ ë° ì˜ˆì¸¡ ê°€ëŠ¥í•œ ìºì‹œ ë™ì‘

### 9. ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ ìµœì í™”

**ë¬¸ì œ ìƒí™©**
- ëŒ“ê¸€ ëª©ë¡ì—ì„œ ê°œë³„ ëŒ“ê¸€ ìˆ˜ì • ì‹œ ì „ì²´ ëª©ë¡ì´ ë¦¬ë Œë”ë§ë˜ëŠ” ë¬¸ì œ
- ìƒìœ„ ì»´í¬ë„ŒíŠ¸ ìƒíƒœ ë³€ê²½ìœ¼ë¡œ ì¸í•œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§

**í•´ê²° ê³¼ì •**
```typescript
// ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ë¥¼ í†µí•œ ë¦¬ë Œë”ë§ ë²”ìœ„ ìµœì†Œí™”
function CommentList({ postId }: { postId: number }) {
  const { data: rootComments } = useRootCommentsData(postId);
  
  return (
    <div>
      {rootComments.map((comment) => (
        // ê° ëŒ“ê¸€ì„ ë…ë¦½ì ì¸ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬
        <CommentItem key={comment.id} {...comment} />
      ))}
    </div>
  );
}

// ìƒíƒœ ìµœì í™”ë¥¼ ìœ„í•œ í›… ë¶„ë¦¬
export const useSession = () => {
  // í•„ìš”í•œ ë¶€ë¶„ë§Œ êµ¬ë…í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
  return useSessionStore((store) => store.session);
};

export const useIsSessionLoaded = () => {
  return useSessionStore((store) => store.isLoaded);
};
```

**ê²°ê³¼**
- ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ íšŸìˆ˜ ì•½ 80% ê°ì†Œ
- ì‚¬ìš©ì ì¸í„°ë™ì…˜ ë°˜ì‘ì„± í¬ê²Œ í–¥ìƒ

### 10. ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ë° í´ë°± UI ì „ëµ

**ë¬¸ì œ ìƒí™©**
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ë‚˜ ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ë¡œ ì¸í•œ í™”ë©´ í¬ë˜ì‹œ
- ì‚¬ìš©ìì—ê²Œ ì ì ˆí•œ í”¼ë“œë°± ì—†ì´ ë¹ˆ í™”ë©´ í‘œì‹œ

**í•´ê²° ê³¼ì •**
```typescript
// ì»´í¬ë„ŒíŠ¸ë³„ ì—ëŸ¬ ì²˜ë¦¬
export default function PostItem({ postId, type }) {
  const { data: post, error, isPending } = usePostbyIdData({ postId, type });
  
  if (isPending) return <Loader />;
  if (error) return <Fallback />; // ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ UI
  
  return <PostContent post={post} />;
}

// ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬
function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <ErrorBoundary fallback={<GlobalErrorFallback />}>
        <BrowserRouter>
          {/* ì•± ì»¨í…ì¸  */}
        </BrowserRouter>
      </ErrorBoundary>
    </QueryClientProvider>
  );
}
```

**ê²°ê³¼**
- ì‚¬ìš©ì ê²½í—˜ í¬ê²Œ ê°œì„  (ì—ëŸ¬ ì‹œì—ë„ ì ì ˆí•œ UI ì œê³µ)
- ì•± ì•ˆì •ì„± ë° ì‹ ë¢°ì„± í–¥ìƒ

### 11. íƒ€ì… ê°€ë“œì™€ ëŸ°íƒ€ì„ íƒ€ì… ê²€ì¦

**ë¬¸ì œ ìƒí™©**
- API ì‘ë‹µ ë°ì´í„°ì˜ íƒ€ì… ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ëŸ°íƒ€ì„ ì˜¤ë¥˜
- ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ì˜ ì˜ˆìƒì¹˜ ëª»í•œ êµ¬ì¡° ë³€ê²½

**í•´ê²° ê³¼ì •**
```typescript
// íƒ€ì… ê°€ë“œ í•¨ìˆ˜ êµ¬í˜„
function isValidComment(data: unknown): data is Comment {
  return (
    typeof data === 'object' &&
    data !== null &&
    'id' in data &&
    'content' in data &&
    'author' in data
  );
}

// ëŸ°íƒ€ì„ íƒ€ì… ê²€ì¦
const nestedReplies = useMemo(() => {
  const allReplies = (replies?.pages.flatMap((page) => page) ?? [])
    .map((id) => queryClient.getQueryData<Comment>(QUERY_KEYS.comment.byId(id)))
    .filter((comment): comment is Comment => comment !== undefined); // íƒ€ì… ê°€ë“œ í™œìš©
  return toNestedReplies(allReplies);
}, [replies, queryClient]);
```

**ê²°ê³¼**
- ëŸ°íƒ€ì„ íƒ€ì… ì˜¤ë¥˜ ëŒ€í­ ê°ì†Œ
- ë”ìš± ê²¬ê³ í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶•

### 12. ì ‘ê·¼ì„± ë° í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜

**ë¬¸ì œ ìƒí™©**
- ìŠ¤í¬ë¦° ë¦¬ë” ì‚¬ìš©ìë¥¼ ìœ„í•œ ì ì ˆí•œ ARIA ì†ì„± ë¶€ì¡±
- í‚¤ë³´ë“œë§Œìœ¼ë¡œ ëª¨ë“  ê¸°ëŠ¥ì— ì ‘ê·¼í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œ

**í•´ê²° ê³¼ì •**
```typescript
// shadcn/ui ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•œ ì ‘ê·¼ì„± í™•ë³´
import { Button } from "@/components/ui/button";
import { Dialog, DialogContent, DialogTitle } from "@/components/ui/dialog";

// ì ì ˆí•œ alt í…ìŠ¤íŠ¸ ë° ARIA ë ˆì´ë¸” ì œê³µ
<img
  src={post.author.avatar_url || defaultAvatar}
  alt={`${post.author.nickname}ì˜ í”„ë¡œí•„ ì´ë¯¸ì§€`}
  className="h-10 w-10 rounded-full object-cover"
/>

// í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›
<div
  onClick={toggleIsRepliesOpened}
  onKeyDown={(e) => e.key === 'Enter' && toggleIsRepliesOpened()}
  tabIndex={0}
  className="cursor-pointer"
>
```

**ê²°ê³¼**
- WCAG 2.1 ì ‘ê·¼ì„± ê°€ì´ë“œë¼ì¸ ì¤€ìˆ˜
- í‚¤ë³´ë“œ ì‚¬ìš©ì ë° ìŠ¤í¬ë¦° ë¦¬ë” ì‚¬ìš©ì ê²½í—˜ ëŒ€í­ ê°œì„ 

### 13. ìƒíƒœ ì§€ì†ì„± ë° ìƒˆë¡œê³ ì¹¨ ì²˜ë¦¬

**ë¬¸ì œ ìƒí™©**
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ì‚¬ìš©ìê°€ ì‘ì„± ì¤‘ì´ë˜ ë‚´ìš© ì†ì‹¤
- ëª¨ë‹¬ ìƒíƒœë‚˜ í¼ ì…ë ¥ê°’ì´ ì´ˆê¸°í™”ë˜ì–´ ì‚¬ìš©ì ê²½í—˜ ì €í•˜

**í•´ê²° ê³¼ì •**
```typescript
// ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ í™œìš©í•œ ì„ì‹œ ì €ì¥
const [content, setContent] = useState(() => {
  const savedContent = localStorage.getItem('draft-post-content');
  return savedContent || '';
});

useEffect(() => {
  // ë‚´ìš© ë³€ê²½ ì‹œë§ˆë‹¤ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
  const timeoutId = setTimeout(() => {
    if (content.trim()) {
      localStorage.setItem('draft-post-content', content);
    } else {
      localStorage.removeItem('draft-post-content');
    }
  }, 500); // ë””ë°”ìš´ì‹±

  return () => clearTimeout(timeoutId);
}, [content]);

// ê²Œì‹œê¸€ ì„±ê³µì ìœ¼ë¡œ ìƒì„± ì‹œ ì„ì‹œ ì €ì¥ ë°ì´í„° ì‚­ì œ
const { mutate: createPost } = useCreatePost({
  onSuccess: () => {
    localStorage.removeItem('draft-post-content');
    postEditorModal.actions.close();
  },
});
```

**ê²°ê³¼**
- ì‚¬ìš©ì ì‘ì„± ì¤‘ì¸ ë°ì´í„° ë³´ì¡´ìœ¼ë¡œ UX í¬ê²Œ ê°œì„ 
- ì˜ˆìƒì¹˜ ëª»í•œ í˜ì´ì§€ ì´íƒˆì—ë„ ì•ˆì „í•œ ë°ì´í„° ë³´í˜¸

### 14. ë™ì  Import ë° ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

**ë¬¸ì œ ìƒí™©**
- ì´ˆê¸° ë²ˆë“¤ í¬ê¸° ì¦ê°€ë¡œ ì¸í•œ ì²« í˜ì´ì§€ ë¡œë”© ì‹œê°„ ì§€ì—°
- ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í˜ì´ì§€ì˜ ì½”ë“œê¹Œì§€ ì´ˆê¸° ë¡œë”©ì— í¬í•¨

**í•´ê²° ê³¼ì •**
```typescript
// ë¼ìš°íŠ¸ ë ˆë²¨ì—ì„œ ë™ì  import ì ìš©
import { lazy, Suspense } from 'react';

const PostDetailPage = lazy(() => import('./pages/post-detail-page'));
const ProfileDetailPage = lazy(() => import('./pages/profile-detail-page'));
const SignInPage = lazy(() => import('./pages/sign-in-page'));

// Suspenseë¥¼ í†µí•œ ë¡œë”© ìƒíƒœ ì²˜ë¦¬
export default function RootRoute() {
  return (
    <Suspense fallback={<GlobalLoader />}>
      <Routes>
        <Route path="/post/:postId" element={<PostDetailPage />} />
        <Route path="/profile/:userId" element={<ProfileDetailPage />} />
        <Route path="/sign-in" element={<SignInPage />} />
      </Routes>
    </Suspense>
  );
}

// ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ ë™ì  import
const PostEditor = lazy(() => import('@/components/modal/post-editor-modal'));
```

**ê²°ê³¼**
- ì´ˆê¸° ë²ˆë“¤ í¬ê¸° ì•½ 40% ê°ì†Œ
- ì²« í˜ì´ì§€ ë¡œë”© ì‹œê°„ ëŒ€í­ ë‹¨ì¶•

### 15. ë°ì´í„° ì •ê·œí™” ë° ì¤‘ë³µ ì œê±°

**ë¬¸ì œ ìƒí™©**
- ë™ì¼í•œ ì‚¬ìš©ì ì •ë³´ê°€ ì—¬ëŸ¬ í¬ìŠ¤íŠ¸ì™€ ëŒ“ê¸€ì— ì¤‘ë³µ ì €ì¥ë˜ì–´ ë©”ëª¨ë¦¬ ë‚­ë¹„
- ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸ ì‹œ ì¼ê´€ì„± ìœ ì§€ì˜ ì–´ë ¤ì›€

**í•´ê²° ê³¼ì •**
```typescript
// ì •ê·œí™”ëœ ë°ì´í„° êµ¬ì¡° ì„¤ê³„
export function useInfinitePostsData(authorId?: string) {
  return useInfiniteQuery({
    queryFn: async ({ pageParam }) => {
      const posts = await fetchPosts({ from, to, userId: session!.user.id, authorId});
      
      // ê°œë³„ ì—”í‹°í‹°ë¥¼ ê°ê° ìºì‹œì— ì €ì¥
      posts.forEach((post) => {
        queryClient.setQueryData(QUERY_KEYS.post.byId(post.id), post);
        queryClient.setQueryData(QUERY_KEYS.profile.byId(post.author_id), post.author);
      });
      
      // ëª©ë¡ì—ëŠ” IDë§Œ ì €ì¥í•˜ì—¬ ì •ê·œí™”
      return posts.map((post) => post.id);
    },
  });
}

// ì •ê·œí™”ëœ ë°ì´í„° ì ‘ê·¼
export function usePostById(postId: number) {
  return useQuery({
    queryKey: QUERY_KEYS.post.byId(postId),
    queryFn: () => { throw new Error("Post should be populated from cache"); },
    initialData: () => queryClient.getQueryData(QUERY_KEYS.post.byId(postId)),
  });
}
```

**ê²°ê³¼**
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì•½ 50% ê°ì†Œ
- ë°ì´í„° ì¼ê´€ì„± ìœ ì§€ ë° ì—…ë°ì´íŠ¸ íš¨ìœ¨ì„± í–¥ìƒ

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ api/               # API í˜¸ì¶œ í•¨ìˆ˜
â”œâ”€â”€ assets/           # ì •ì  ìì‚°
â”œâ”€â”€ components/       # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/          # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ layout/      # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ modal/       # ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ post/        # í¬ìŠ¤íŠ¸ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ comment/     # ëŒ“ê¸€ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/           # ì»¤ìŠ¤í…€ í›…
â”‚   â”œâ”€â”€ mutations/   # React Query ë®¤í…Œì´ì…˜ í›…
â”‚   â””â”€â”€ queries/     # React Query ì¿¼ë¦¬ í›…
â”œâ”€â”€ lib/             # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ pages/           # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ provider/        # Context Provider
â”œâ”€â”€ store/           # Zustand ìŠ¤í† ì–´
â””â”€â”€ types.ts         # TypeScript íƒ€ì… ì •ì˜
```

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. ì´ ì €ì¥ì†Œë¥¼ í¬í¬í•©ë‹ˆë‹¤
2. ìƒˆë¡œìš´ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤ (`git checkout -b feature/amazing-feature`)
3. ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•©ë‹ˆë‹¤ (`git commit -m 'Add some amazing feature'`)
4. ë¸Œëœì¹˜ì— í‘¸ì‹œí•©ë‹ˆë‹¤ (`git push origin feature/amazing-feature`)
5. Pull Requestë¥¼ ìƒì„±í•©ë‹ˆë‹¤

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„¼ìŠ¤ í•˜ì— ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ê³ í•˜ì„¸ìš”.

## ğŸ“ ì—°ë½ì²˜

- ê°œë°œì: [Your Name]
- ì´ë©”ì¼: your.email@example.com
- í”„ë¡œì íŠ¸ ë§í¬: [https://github.com/yourusername/imstagramoo](https://github.com/yourusername/imstagramoo)

## ğŸ™ ê°ì‚¬ì˜ ë§

- [Supabase](https://supabase.com) - ê°•ë ¥í•œ ë°±ì—”ë“œ ì„œë¹„ìŠ¤
- [shadcn/ui](https://ui.shadcn.com) - ì•„ë¦„ë‹¤ìš´ UI ì»´í¬ë„ŒíŠ¸
- [TanStack Query](https://tanstack.com/query) - íš¨ìœ¨ì ì¸ ì„œë²„ ìƒíƒœ ê´€ë¦¬
- [Zustand](https://zustand-demo.pmnd.rs) - ê°„ë‹¨í•˜ê³  ê°•ë ¥í•œ ìƒíƒœ ê´€ë¦¬